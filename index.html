<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mangop Digital Growth Agency | Portf칩lio & Reuni칚o Estrat칠gica</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #0f172a, #0b1120);
    }

    .glass {
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.12);
      backdrop-filter: blur(16px);
    }

    .glow {
      box-shadow: 0 20px 60px rgba(249, 115, 22, 0.22);
    }

    .input-style {
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 14px;
      padding: 12px 14px;
      width: 100%;
      transition: 0.25s;
    }

    .input-style:focus {
      outline: none;
      border-color: #f97316;
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.2);
    }

    .btn-primary {
      background: linear-gradient(90deg, #f97316, #facc15);
      color: #0f172a;
      border-radius: 14px;
      padding: 13px;
      font-weight: 700;
      transition: .2s;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 35px rgba(249, 115, 22, 0.35);
    }
  </style>
</head>
<body class="text-white">
  <main class="max-w-7xl mx-auto px-6 py-10 space-y-10">
    <section class="grid lg:grid-cols-2 gap-8 items-center">
      <div class="space-y-5">
        <p class="inline-block text-sm font-semibold text-orange-300 bg-orange-500/10 px-3 py-1 rounded-full">Portf칩lio Mangop</p>
        <h1 class="text-4xl md:text-5xl font-extrabold leading-tight">Performance Digital para Empresas que Querem Escalar</h1>
        <p class="text-slate-300 text-lg">Criamos estrat칠gias orientadas por dados com foco em aquisi칞칚o, convers칚o e crescimento sustent치vel.</p>
        <div class="flex flex-wrap gap-3 text-sm">
          <span class="glass rounded-full px-3 py-1">+150 empresas impactadas</span>
          <span class="glass rounded-full px-3 py-1">Meta Ads</span>
          <span class="glass rounded-full px-3 py-1">Tracking Avan칞ado</span>
        </div>
      </div>
      <div class="glass rounded-3xl p-7 glow space-y-4">
        <h2 class="text-2xl font-bold">Resultados que entregamos</h2>
        <div class="grid sm:grid-cols-3 gap-3 text-center">
          <div class="bg-white/5 rounded-2xl p-4">
            <p class="text-3xl font-bold text-orange-300">+212%</p>
            <p class="text-xs text-slate-300">Aumento m칠dio de leads</p>
          </div>
          <div class="bg-white/5 rounded-2xl p-4">
            <p class="text-3xl font-bold text-orange-300">-38%</p>
            <p class="text-xs text-slate-300">Redu칞칚o de CPL</p>
          </div>
          <div class="bg-white/5 rounded-2xl p-4">
            <p class="text-3xl font-bold text-orange-300">4.7x</p>
            <p class="text-xs text-slate-300">ROAS em campanhas</p>
          </div>
        </div>
      </div>
    </section>

    <section class="grid md:grid-cols-3 gap-5">
      <article class="glass rounded-2xl p-5">
        <h3 class="font-semibold text-lg mb-2">E-commerce de Moda</h3>
        <p class="text-slate-300 text-sm">Escala de vendas com criativos UGC + campanhas de remarketing segmentadas.</p>
      </article>
      <article class="glass rounded-2xl p-5">
        <h3 class="font-semibold text-lg mb-2">Educa칞칚o Online</h3>
        <p class="text-slate-300 text-sm">Funil de webinars com automa칞칫es e rastreamento completo de eventos.</p>
      </article>
      <article class="glass rounded-2xl p-5">
        <h3 class="font-semibold text-lg mb-2">Servi칞os B2B</h3>
        <p class="text-slate-300 text-sm">Gera칞칚o de leads qualificados com foco em CAC previs칤vel e pipeline comercial.</p>
      </article>
    </section>

    <section class="grid lg:grid-cols-2 gap-8 items-start">
      <div class="glass rounded-3xl p-6 space-y-4">
        <h2 class="text-2xl font-bold">Reuni칚o Estrat칠gica</h2>
        <p class="text-slate-300">Reserve 30 minutos para analisarmos seu cen치rio e definir os pr칩ximos passos de crescimento.</p>

        <div class="space-y-3 text-sm">
          <p class="flex justify-between"><span>Dura칞칚o</span><span class="text-orange-300 font-medium">30 minutos</span></p>
          <p class="flex justify-between"><span>Formato</span><span class="text-orange-300 font-medium">Google Meet</span></p>
          <p class="flex justify-between"><span>Fuso hor치rio</span><span id="timezone" class="text-orange-300 font-medium"></span></p>
        </div>
      </div>

      <div class="bg-white text-slate-800 rounded-3xl p-8 glow">
        <h3 class="text-2xl font-bold mb-5">Agende agora</h3>

        <div class="space-y-3">
          <input type="date" id="date" class="input-style">

          <select id="time" class="input-style">
            <option value="">Selecione hor치rio</option>
          </select>

          <input type="text" id="name" placeholder="Nome completo" class="input-style">
          <input type="email" id="email" placeholder="Email profissional" class="input-style">

          <div class="flex gap-2">
            <select id="countrySelect" class="input-style max-w-[180px]">
              <option value="+244">游뷣릖 +244</option>
              <option value="+258">游쓇릖 +258</option>
              <option value="+238">游뻟릖 +238</option>
              <option value="+351">游왫릖 +351</option>
              <option value="+55">游游 +55</option>
              <option value="+44">游섫릖 +44</option>
              <option value="+1">游쥟릖 +1</option>
            </select>
            <input type="tel" id="phone" placeholder="N칰mero" class="input-style" inputmode="numeric" maxlength="15" required>
          </div>

          <input type="text" id="company" placeholder="Empresa" class="input-style">
          <textarea id="description" placeholder="Objetivo ou desafio atual" class="input-style min-h-[110px]"></textarea>

          <button onclick="book()" class="btn-primary w-full">Confirmar Reuni칚o</button>
          <p id="message" class="text-center text-sm font-medium"></p>
        </div>
      </div>
    </section>
  </main>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycby09-6aL4tA4ufcTCqC7hKrCrllRdvZnrT_Ge4LwlVfv67GKblabJzw3RpOHzUQt3ZAbQ/exec";
const START = 9;
const END = 22;

const dateInput = document.getElementById("date");
const timeSelect = document.getElementById("time");
const messageBox = document.getElementById("message");
const button = document.querySelector("button");
const phoneInput = document.getElementById("phone");
const countrySelect = document.getElementById("countrySelect");

async function parseResponse(res) {
  if (!res.ok) {
    throw new Error(`HTTP ${res.status}`);
  }

  const contentType = res.headers.get("content-type") || "";
  const raw = await res.text();

  if (!raw) return {};

  if (contentType.includes("application/json")) {
    return JSON.parse(raw);
  }

  try {
    return JSON.parse(raw);
  } catch {
    throw new Error("Resposta inv치lida do servidor");
  }
}

async function callScript(payload, method = "POST") {
  if (method === "GET") {
    const query = new URLSearchParams(payload).toString();
    const res = await fetch(`${SCRIPT_URL}?${query}`, { method: "GET" });
    return parseResponse(res);
  }

  const body = new URLSearchParams(payload).toString();
  const res = await fetch(SCRIPT_URL, {
    method: "POST",
    headers: { "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8" },
    body
  });

  return parseResponse(res);
}

phoneInput.addEventListener("input", function () {
  this.value = this.value.replace(/\D/g, "");
});

document.getElementById("timezone").innerText = Intl.DateTimeFormat().resolvedOptions().timeZone;

const today = new Date().toISOString().split("T")[0];
dateInput.setAttribute("min", today);
dateInput.addEventListener("change", loadTimes);

function loadTimes() {
  const date = dateInput.value;
  if (!date) return;

  messageBox.textContent = "Carregando hor치rios...";

  callScript({ action: "getBusy", date }, "GET")
    .then(data => {
      timeSelect.innerHTML = "<option value=''>Selecione hor치rio</option>";

      if (data.busy === "full") {
        messageBox.innerHTML = "<span class='text-red-600'>Este dia j치 est치 totalmente lotado.</span>";
        return;
      }

      const now = new Date();
      const selectedDate = new Date(date + "T00:00:00");

      for (let h = START; h < END; h++) {
        const hour = `${h < 10 ? "0" : ""}${h}:00`;

        if (selectedDate.toDateString() === now.toDateString() && h <= now.getHours()) {
          continue;
        }

        if (!data.busy || !data.busy.includes(hour)) {
          const opt = document.createElement("option");
          opt.value = hour;
          opt.innerText = hour;
          timeSelect.appendChild(opt);
        }
      }

      messageBox.textContent = "";
    })
    .catch(error => {
      console.error("Erro ao carregar hor치rios:", error);
      messageBox.innerHTML = "<span class='text-red-600'>Erro ao carregar hor치rios. Verifique sua conex칚o e tente novamente.</span>";
    });
}

function validateEmail(email) {
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}

function book() {
  const date = dateInput.value;
  const time = timeSelect.value;
  const name = document.getElementById("name").value.trim();
  const email = document.getElementById("email").value.trim();
  const countryCode = countrySelect.value;
  const phoneNumber = phoneInput.value.trim();
  const company = document.getElementById("company").value.trim();
  const description = document.getElementById("description").value.trim();

  if (!date || !time || !name || !email || !phoneNumber) {
    messageBox.innerHTML = "<span class='text-red-600'>Preencha todos os campos obrigat칩rios.</span>";
    return;
  }

  if (!validateEmail(email)) {
    messageBox.innerHTML = "<span class='text-red-600'>Email inv치lido.</span>";
    return;
  }

  if (phoneNumber.length < 7) {
    messageBox.innerHTML = "<span class='text-red-600'>N칰mero inv치lido.</span>";
    return;
  }

  button.disabled = true;
  button.innerHTML = "Agendando...";

  const payload = {
    action: "book",
    date,
    time,
    name,
    email,
    phone: countryCode + phoneNumber,
    company,
    description
  };

  callScript(payload)
    .then(data => {
      if (data.status === "success") {
        messageBox.innerHTML = "<span class='text-green-600'>Reuni칚o confirmada! Redirecionando...</span>";
        setTimeout(() => { window.location.href = "thank-you.html"; }, 900);
        return;
      }

      if (data.status === "occupied") {
        messageBox.innerHTML = "<span class='text-red-600'>Hor치rio ocupado. Escolha outro.</span>";
        loadTimes();
      } else if (data.status === "full") {
        messageBox.innerHTML = "<span class='text-red-600'>Este dia j치 est치 lotado.</span>";
      } else if (data.status === "outside_business_hours") {
        messageBox.innerHTML = "<span class='text-red-600'>Fora do hor치rio comercial.</span>";
      } else {
        messageBox.innerHTML = `<span class='text-red-600'>${data.message || "Erro inesperado."}</span>`;
      }

      button.disabled = false;
      button.innerHTML = "Confirmar Reuni칚o";
    })
    .catch(error => {
      console.error("Erro de conex칚o:", error);
      messageBox.innerHTML = "<span class='text-red-600'>Erro de conex칚o com o servidor.</span>";
      button.disabled = false;
      button.innerHTML = "Confirmar Reuni칚o";
    });
}
</script>
</body>
</html>
